# -------------------------
# Memory Settings
# -------------------------
shared_buffers = 1GB               # Cache data in RAM (~25% of 4GB)
work_mem = 4MB                      # Memory per sort/join
effective_cache_size = 3GB          # OS + PostgreSQL caching (~75% of RAM)

# -------------------------
# Connections
# -------------------------
max_connections = 50                # Keep reasonable for small workload
superuser_reserved_connections = 3  # Reserve a few connections for admin

# -------------------------
# WAL / Write Performance
# -------------------------
wal_buffers = 16MB
checkpoint_completion_target = 0.7
synchronous_commit = on             # Ensures data durability

# -------------------------
# Autovacuum
# -------------------------
autovacuum = on
autovacuum_max_workers = 3
autovacuum_naptime = 60s
autovacuum_vacuum_scale_factor = 0.2
autovacuum_analyze_scale_factor = 0.1

# -------------------------
# Logging (optional, helps with debugging)
# -------------------------
log_min_duration_statement = 500    # Log queries slower than 500ms
log_checkpoints = on
log_connections = on
log_disconnections = on

# -------------------------
# Listen Addresses (already set by your script)
# -------------------------
listen_addresses = '*'              # Accept connections from any IP
port = 5432
